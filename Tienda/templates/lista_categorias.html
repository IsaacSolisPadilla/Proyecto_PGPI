{% extends 'base.html' %}

{% block title %}Lista de Categorías{% endblock %}

{% block content %}
<h2 style="color:white; text-align:center;">Categorías disponibles:</h2>

<div style="margin-top: 40px; margin-bottom: 40px; text-align: center;">
    {% if user.is_authenticated and user.is_staff %}
        <a href="{% url 'crear_categoria' %}" class="create-button">Crear nueva categoría</a>
    {% endif %}
</div>

<!-- Listado de categorías -->
<section class="category-list">
    <div class="category-grid">
        {% for categoria in categorias %}
        <div class="category-item">
            <a href="/categorias/{{ categoria.id }}" style="text-decoration: none;">
                <h3>{{ categoria.nombre }}</h3>
                <p>{{ categoria.descripcion|default:"Sin descripción" }}</p>
            </a>
            {% if user.is_authenticated and user.is_staff %}
            <div class="category-actions">
                <a href="{% url 'ver_actualizar_categoria' categoria.id %}" class="update-button">Actualizar</a>
                <form action="{% url 'eliminar_categoria' categoria.id %}" method="post" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="delete-button">Eliminar</button>
                </form>
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</section>
{% endblock %}

<style>
    /* Contenedor de categorías */
    .category-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
    }

    .category-item {
        background-color: rgba(255, 255, 255, 0.9);
        border-radius: 12px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        padding: 20px;
        text-align: center;
    }

    .category-item:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 20px rgba(0, 0, 0, 0.1);
    }

    .category-item h3 {
        font-size: 20px;
        color: #006e6f;
        margin: 10px 0;
    }

    .category-item p {
        color: #555;
        font-size: 16px;
    }

    .category-actions {
        margin-top: 10px;
        display: flex;
        justify-content: center;
        gap: 10px;
    }

    .edit-button, .delete-button {
        background-color: transparent;
        border: none;
        cursor: pointer;
        color: #006e6f;
        font-size: 16px;
        padding: 5px 10px;
        transition: color 0.3s ease;
        text-decoration: none;
    }

    .edit-button:hover {
        color: #218838;
    }

    .delete-button {
        color: #e63946;
    }

    .delete-button:hover {
        color: #c62828;
    }

    .create-button {
        background-color: #ffffff;
        color: #006e6f;
        text-decoration: none;
        padding: 10px 20px;
        border-radius: 5px;
        font-size: 16px;
        font-weight: bold;
        transition: background-color 0.3s ease;
        margin-left: auto;
    }

    .create-button:hover {
        background-color: #006e6f;
        color: white;
    }
</style>
